# SPDX-License-Identifier: MIT
# Copyright (c) 2025-2026 Kaptain contributors (Fred Cooke)

- name: Build image
  id: docker-build
  uses: ./.github/buildon-github-actions/src/actions/docker-build-dockerfile
  with:
    docker-target-registry: ${{ steps.resolve-registry.outputs.docker-target-registry }}
    docker-target-base-path: ${{ steps.resolve-registry.outputs.docker-target-base-path }}
    docker-image-name: ${{ steps.versions.outputs.docker-image-name }}
    docker-tag: ${{ steps.versions.outputs.docker-tag }}
    version: ${{ steps.versions.outputs.version }}
    project-name: ${{ steps.versions.outputs.project-name }}
    is-release: ${{ steps.versions.outputs.is-release }}
    dockerfile-sub-path: ${{ inputs.dockerfile-sub-path }}
    dockerfile-substitution-files: ${{ inputs.dockerfile-substitution-files }}
    output-sub-path: ${{ inputs.output-sub-path }}
    docker-push-image-list-file: ${{ steps.docker-registry-logins.outputs.docker-push-image-list-file }}
    dockerfile-squash: ${{ inputs.dockerfile-squash }}
    dockerfile-no-cache: ${{ inputs.dockerfile-no-cache }}
    token-delimiter-style: ${{ inputs.token-delimiter-style }}
    token-name-style: ${{ inputs.token-name-style }}
    token-name-validation: ${{ inputs.token-name-validation }}
    config-sub-path: ${{ inputs.config-sub-path }}
    allow-builtin-token-override: ${{ inputs.allow-builtin-token-override }}
    config-value-trailing-newline: ${{ inputs.config-value-trailing-newline }}
    image-build-command: ${{ steps.validate-tooling.outputs.IMAGE_BUILD_COMMAND }}
