# SPDX-License-Identifier: MIT
# Copyright (c) 2025-2026 Kaptain contributors (Fred Cooke)

name: 'EKS Cluster Management Pre-Build Validate'
description: 'Validate cluster yaml token placement before docker build'

inputs:
  # INJECT-INPUT: output-sub-path
  # INJECT-INPUT: docker-dockerfile
  # INJECT-INPUT: docker-platform
  # INJECT-INPUT: token-substitution

runs:
  using: 'composite'
  steps:
    - name: Validate cluster yaml tokens
      id: pre-build-validate
      shell: bash
      env:
        BUILD_PLATFORM: github-actions
        BUILD_PLATFORM_LOG_PROVIDER: github-actions
        OUTPUT_SUB_PATH: ${{ inputs.output-sub-path }}
        DOCKERFILE_SUB_PATH: ${{ inputs.dockerfile-sub-path }}
        DOCKERFILE_SUB_PATH_LINUX_AMD64: ${{ inputs.dockerfile-sub-path-linux-amd64 }}
        DOCKERFILE_SUB_PATH_LINUX_ARM64: ${{ inputs.dockerfile-sub-path-linux-arm64 }}
        DOCKER_PLATFORM: ${{ inputs.docker-platform }}
        TOKEN_DELIMITER_STYLE: ${{ inputs.token-delimiter-style }}
        TOKEN_NAME_STYLE: ${{ inputs.token-name-style }}
      run: "${{ github.action_path }}/../../scripts/main/aws-eks-cluster-management-pre-build-validate"
