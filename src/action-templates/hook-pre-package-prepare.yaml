# SPDX-License-Identifier: MIT
# Copyright (c) 2025-2026 Kaptain contributors (Fred Cooke)

name: Hook - Pre-Package Prepare
description: Runs user's hook script before manifest packaging to generate ConfigMaps, modify manifests, or add files

inputs:
  # Hook script path
  script-sub-path:
    description: 'Path to script relative to .github/ (e.g., bin/pre-package.bash)'
    required: true
  # INJECT-INPUT: image-build-command

  # === Workflow Inputs ===
  # INJECT-INPUT: output-sub-path
  # INJECT-INPUT: docker-push-image-list
  # INJECT-INPUT: docker-build
  # INJECT-INPUT: docker-dockerfile
  # INJECT-INPUT: kubernetes-app-manifests
  # INJECT-INPUT: kubernetes-global
  # INJECT-INPUT: kubernetes-configmap
  # INJECT-INPUT: kubernetes-secret-template
  # INJECT-INPUT: kubernetes-serviceaccount
  # INJECT-INPUT: kubernetes-workload
  # INJECT-INPUT: kubernetes-workload-deployment
  # INJECT-INPUT: kubernetes-workload-statefulset
  # INJECT-INPUT: kubernetes-workload-daemonset
  # INJECT-INPUT: kubernetes-workload-job
  # INJECT-INPUT: kubernetes-workload-cronjob
  # INJECT-INPUT: kubernetes-service
  # INJECT-INPUT: token-substitution
  # INJECT-INPUT: release-branches
  # INJECT-INPUT: tag-version
  # INJECT-INPUT: basic-quality-checks
  # INJECT-INPUT: hooks-pre-tagging
  # INJECT-INPUT: hooks-docker
  # INJECT-INPUT: hooks-package
  # INJECT-INPUT: github-release
  # INJECT-INPUT: docker-platform

  # === Step Outputs ===
  # Version outputs (from versions-and-naming)
  version:
    description: 'Version string'
    required: true
  version-major:
    description: 'Major version number'
    required: true
  version-minor:
    description: 'Minor version number'
    required: true
  version-patch:
    description: 'Patch version number'
    required: true
  version-2-part:
    description: 'Version padded/truncated to 2 parts'
    required: true
  version-3-part:
    description: 'Version padded/truncated to 3 parts'
    required: true
  version-4-part:
    description: 'Version padded/truncated to 4 parts'
    required: true
  docker-tag:
    description: 'Docker tag'
    required: true
  docker-image-name:
    description: 'Docker image name'
    required: true
  git-tag:
    description: 'Git tag'
    required: true
  project-name:
    description: 'Project name'
    required: true
  is-release:
    description: 'Whether this is a release build'
    required: true
  # Docker outputs (from docker-build)
  docker-substituted-sub-path:
    description: 'Docker substituted files directory - empty in manifests-only workflows'
    required: false
    default: ''
  target-image-full-uri:
    description: 'Full target image URI (registry/name:tag) - empty in manifests-only workflows'
    required: false
    default: ''
  # Manifest outputs (computed path for this position)
  manifests-substituted-sub-path:
    description: 'Manifests substituted directory (where substituted manifests go)'
    required: true

runs:
  using: composite
  steps:
    - name: Run pre-package prepare hook
      shell: bash
      env:
        HOOK_SCRIPT_SUB_PATH: .github/${{ inputs.script-sub-path }}
        IMAGE_BUILD_COMMAND: ${{ inputs.image-build-command }}
        BUILD_PLATFORM: github-actions
        BUILD_PLATFORM_LOG_PROVIDER: github-actions
        # Workflow inputs - build output
        OUTPUT_SUB_PATH: ${{ inputs.output-sub-path }}
        DOCKER_PUSH_IMAGE_LIST_FILE: ${{ inputs.docker-push-image-list-file }}

        # Workflow inputs - docker registry logins
        DOCKER_REGISTRY_LOGINS: ${{ inputs.docker-registry-logins }}
        # Workflow inputs - docker build options
        DOCKERFILE_SUB_PATH: ${{ inputs.dockerfile-sub-path }}
        DOCKERFILE_SUB_PATH_LINUX_AMD64: ${{ inputs.dockerfile-sub-path-linux-amd64 }}
        DOCKERFILE_SUB_PATH_LINUX_ARM64: ${{ inputs.dockerfile-sub-path-linux-arm64 }}
        DOCKERFILE_SQUASH: ${{ inputs.dockerfile-squash }}
        DOCKERFILE_NO_CACHE: ${{ inputs.dockerfile-no-cache }}
        DOCKER_PLATFORM: ${{ inputs.docker-platform }}
        # Workflow inputs - docker target config
        DOCKER_TARGET_REGISTRY: ${{ inputs.docker-target-registry }}
        DOCKER_TARGET_NAMESPACE: ${{ inputs.docker-target-namespace }}
        # Workflow inputs - docker push targets
        DOCKER_PUSH_TARGETS: ${{ inputs.docker-push-targets }}
        # Workflow inputs - docker source (for multi-stage/source images)
        DOCKER_SOURCE_REGISTRY: ${{ inputs.docker-source-registry }}
        DOCKER_SOURCE_NAMESPACE: ${{ inputs.docker-source-namespace }}
        DOCKER_SOURCE_IMAGE_NAME: ${{ inputs.docker-source-image-name }}
        DOCKER_SOURCE_TAG: ${{ inputs.docker-source-tag }}

        # Workflow inputs - manifests source
        MANIFESTS_SUB_PATH: ${{ inputs.manifests-sub-path }}
        # Workflow inputs - manifests packaging
        MANIFESTS_REPO_PROVIDER_TYPE: ${{ inputs.manifests-repo-provider-type }}
        MANIFESTS_PACKAGING_BASE_IMAGE: ${{ inputs.manifests-packaging-base-image }}

        # Workflow inputs - kubernetes generation
        KUBERNETES_GLOBAL_ADDITIONAL_LABELS: ${{ inputs.kubernetes-global-additional-labels }}
        KUBERNETES_GLOBAL_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-global-additional-annotations }}
        # Workflow inputs - kubernetes configmap generation
        KUBERNETES_CONFIGMAP_SUB_PATH: ${{ inputs.kubernetes-configmap-sub-path }}
        KUBERNETES_CONFIGMAP_NAME_CHECKSUM_INJECTION: ${{ inputs.kubernetes-configmap-name-checksum-injection }}
        KUBERNETES_CONFIGMAP_ADDITIONAL_LABELS: ${{ inputs.kubernetes-configmap-additional-labels }}
        KUBERNETES_CONFIGMAP_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-configmap-additional-annotations }}
        KUBERNETES_CONFIGMAP_NAME_SUFFIX: ${{ inputs.kubernetes-configmap-name-suffix }}
        KUBERNETES_CONFIGMAP_COMBINED_SUB_PATH: ${{ inputs.kubernetes-configmap-combined-sub-path }}
        # Workflow inputs - kubernetes secret template generation
        KUBERNETES_SECRET_TEMPLATE_SUB_PATH: ${{ inputs.kubernetes-secret-template-sub-path }}
        KUBERNETES_SECRET_TEMPLATE_NAME_CHECKSUM_INJECTION: ${{ inputs.kubernetes-secret-template-name-checksum-injection }}
        KUBERNETES_SECRET_TEMPLATE_ADDITIONAL_LABELS: ${{ inputs.kubernetes-secret-template-additional-labels }}
        KUBERNETES_SECRET_TEMPLATE_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-secret-template-additional-annotations }}
        KUBERNETES_SECRET_TEMPLATE_NAME_SUFFIX: ${{ inputs.kubernetes-secret-template-name-suffix }}
        KUBERNETES_SECRET_TEMPLATE_COMBINED_SUB_PATH: ${{ inputs.kubernetes-secret-template-combined-sub-path }}
        # Workflow inputs - kubernetes serviceaccount generation
        KUBERNETES_SERVICEACCOUNT_GENERATION_ENABLED: ${{ inputs.kubernetes-serviceaccount-generation-enabled }}
        KUBERNETES_SERVICEACCOUNT_NAME_SUFFIX: ${{ inputs.kubernetes-serviceaccount-name-suffix }}
        KUBERNETES_SERVICEACCOUNT_COMBINED_SUB_PATH: ${{ inputs.kubernetes-serviceaccount-combined-sub-path }}
        KUBERNETES_SERVICEACCOUNT_ADDITIONAL_LABELS: ${{ inputs.kubernetes-serviceaccount-additional-labels }}
        KUBERNETES_SERVICEACCOUNT_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-serviceaccount-additional-annotations }}
        # Workflow inputs - kubernetes workload generation
        KUBERNETES_WORKLOAD_TYPE: ${{ inputs.kubernetes-workload-type }}
        KUBERNETES_WORKLOAD_NAME_SUFFIX: ${{ inputs.kubernetes-workload-name-suffix }}
        KUBERNETES_WORKLOAD_COMBINED_SUB_PATH: ${{ inputs.kubernetes-workload-combined-sub-path }}
        KUBERNETES_WORKLOAD_ENV_SUB_PATH: ${{ inputs.kubernetes-workload-env-sub-path }}
        KUBERNETES_WORKLOAD_ADDITIONAL_LABELS: ${{ inputs.kubernetes-workload-additional-labels }}
        KUBERNETES_WORKLOAD_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-workload-additional-annotations }}
        KUBERNETES_WORKLOAD_CONTAINER_PORT: ${{ inputs.kubernetes-workload-container-port }}
        KUBERNETES_WORKLOAD_IMAGE_REFERENCE_STYLE: ${{ inputs.kubernetes-workload-image-reference-style }}
        KUBERNETES_WORKLOAD_READONLY_ROOT_FILESYSTEM: ${{ inputs.kubernetes-workload-readonly-root-filesystem }}
        KUBERNETES_WORKLOAD_SECCOMP_PROFILE: ${{ inputs.kubernetes-workload-seccomp-profile }}
        KUBERNETES_WORKLOAD_AUTOMOUNT_SERVICE_ACCOUNT_TOKEN: ${{ inputs.kubernetes-workload-automount-service-account-token }}
        KUBERNETES_WORKLOAD_IMAGE_PULL_SECRETS: ${{ inputs.kubernetes-workload-image-pull-secrets }}
        KUBERNETES_WORKLOAD_RESOURCES_MEMORY: ${{ inputs.kubernetes-workload-resources-memory }}
        KUBERNETES_WORKLOAD_RESOURCES_CPU_REQUEST: ${{ inputs.kubernetes-workload-resources-cpu-request }}
        KUBERNETES_WORKLOAD_RESOURCES_CPU_LIMIT: ${{ inputs.kubernetes-workload-resources-cpu-limit }}
        KUBERNETES_WORKLOAD_CONFIGMAP_MOUNT_PATH: ${{ inputs.kubernetes-workload-configmap-mount-path }}
        KUBERNETES_WORKLOAD_SECRET_MOUNT_PATH: ${{ inputs.kubernetes-workload-secret-mount-path }}
        KUBERNETES_WORKLOAD_TERMINATION_GRACE_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-termination-grace-period-seconds }}
        KUBERNETES_WORKLOAD_PRESTOP_COMMAND: ${{ inputs.kubernetes-workload-prestop-command }}
        KUBERNETES_WORKLOAD_AFFINITY_STRATEGY: ${{ inputs.kubernetes-workload-affinity-strategy }}
        KUBERNETES_WORKLOAD_TOLERATIONS: ${{ inputs.kubernetes-workload-tolerations }}
        KUBERNETES_WORKLOAD_NODE_SELECTOR: ${{ inputs.kubernetes-workload-node-selector }}
        KUBERNETES_WORKLOAD_DNS_POLICY: ${{ inputs.kubernetes-workload-dns-policy }}
        KUBERNETES_WORKLOAD_PRIORITY_CLASS_NAME: ${{ inputs.kubernetes-workload-priority-class-name }}
        KUBERNETES_WORKLOAD_CONTAINER_COMMAND: ${{ inputs.kubernetes-workload-container-command }}
        KUBERNETES_WORKLOAD_CONTAINER_ARGS: ${{ inputs.kubernetes-workload-container-args }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-liveness-check-type }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-readiness-check-type }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-startup-check-type }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-liveness-http-path }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-readiness-http-path }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-startup-http-path }}
        KUBERNETES_WORKLOAD_REPLICAS: ${{ inputs.kubernetes-workload-replicas }}
        KUBERNETES_WORKLOAD_REVISION_HISTORY_LIMIT: ${{ inputs.kubernetes-workload-revision-history-limit }}
        KUBERNETES_WORKLOAD_MIN_READY_SECONDS: ${{ inputs.kubernetes-workload-min-ready-seconds }}
        # Workflow inputs - deployment unique
        KUBERNETES_DEPLOYMENT_ENV_SUB_PATH: ${{ inputs.kubernetes-deployment-env-sub-path }}
        KUBERNETES_DEPLOYMENT_ADDITIONAL_LABELS: ${{ inputs.kubernetes-deployment-additional-labels }}
        KUBERNETES_DEPLOYMENT_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-deployment-additional-annotations }}
        KUBERNETES_DEPLOYMENT_MAX_SURGE: ${{ inputs.kubernetes-deployment-max-surge }}
        KUBERNETES_DEPLOYMENT_MAX_UNAVAILABLE: ${{ inputs.kubernetes-deployment-max-unavailable }}
        # Workflow inputs - statefulset unique
        KUBERNETES_STATEFULSET_SERVICE_NAME: ${{ inputs.kubernetes-statefulset-service-name }}
        KUBERNETES_STATEFULSET_POD_MANAGEMENT_POLICY: ${{ inputs.kubernetes-statefulset-pod-management-policy }}
        KUBERNETES_STATEFULSET_ALLOW_UNRELIABLE_POD_MANAGEMENT_POLICY: ${{ inputs.kubernetes-statefulset-allow-unreliable-pod-management-policy }}
        KUBERNETES_STATEFULSET_UPDATE_STRATEGY_TYPE: ${{ inputs.kubernetes-statefulset-update-strategy-type }}
        KUBERNETES_STATEFULSET_UPDATE_STRATEGY_PARTITION: ${{ inputs.kubernetes-statefulset-update-strategy-partition }}
        KUBERNETES_STATEFULSET_PVC_ENABLED: ${{ inputs.kubernetes-statefulset-pvc-enabled }}
        KUBERNETES_STATEFULSET_PVC_STORAGE_CLASS: ${{ inputs.kubernetes-statefulset-pvc-storage-class }}
        KUBERNETES_STATEFULSET_PVC_STORAGE_SIZE: ${{ inputs.kubernetes-statefulset-pvc-storage-size }}
        KUBERNETES_STATEFULSET_PVC_ACCESS_MODE: ${{ inputs.kubernetes-statefulset-pvc-access-mode }}
        KUBERNETES_STATEFULSET_PVC_VOLUME_NAME: ${{ inputs.kubernetes-statefulset-pvc-volume-name }}
        KUBERNETES_STATEFULSET_PVC_MOUNT_PATH: ${{ inputs.kubernetes-statefulset-pvc-mount-path }}
        KUBERNETES_STATEFULSET_ENV_SUB_PATH: ${{ inputs.kubernetes-statefulset-env-sub-path }}
        KUBERNETES_STATEFULSET_ADDITIONAL_LABELS: ${{ inputs.kubernetes-statefulset-additional-labels }}
        KUBERNETES_STATEFULSET_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-statefulset-additional-annotations }}
        # Workflow inputs - daemonset unique
        KUBERNETES_DAEMONSET_ENV_SUB_PATH: ${{ inputs.kubernetes-daemonset-env-sub-path }}
        KUBERNETES_DAEMONSET_UPDATE_STRATEGY_TYPE: ${{ inputs.kubernetes-daemonset-update-strategy-type }}
        KUBERNETES_DAEMONSET_MAX_UNAVAILABLE: ${{ inputs.kubernetes-daemonset-max-unavailable }}
        KUBERNETES_DAEMONSET_HOST_NETWORK: ${{ inputs.kubernetes-daemonset-host-network }}
        KUBERNETES_DAEMONSET_HOST_PID: ${{ inputs.kubernetes-daemonset-host-pid }}
        KUBERNETES_DAEMONSET_HOST_IPC: ${{ inputs.kubernetes-daemonset-host-ipc }}
        KUBERNETES_DAEMONSET_RUN_AS_NON_ROOT: ${{ inputs.kubernetes-daemonset-run-as-non-root }}
        KUBERNETES_DAEMONSET_PRIVILEGED: ${{ inputs.kubernetes-daemonset-privileged }}
        KUBERNETES_DAEMONSET_DNS_POLICY: ${{ inputs.kubernetes-daemonset-dns-policy }}
        KUBERNETES_DAEMONSET_TOLERATIONS: ${{ inputs.kubernetes-daemonset-tolerations }}
        KUBERNETES_DAEMONSET_NODE_SELECTOR: ${{ inputs.kubernetes-daemonset-node-selector }}
        KUBERNETES_DAEMONSET_ADDITIONAL_LABELS: ${{ inputs.kubernetes-daemonset-additional-labels }}
        KUBERNETES_DAEMONSET_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-daemonset-additional-annotations }}
        # Workflow inputs - job unique
        KUBERNETES_JOB_NAME_SUFFIX: ${{ inputs.kubernetes-job-name-suffix }}
        KUBERNETES_JOB_COMBINED_SUB_PATH: ${{ inputs.kubernetes-job-combined-sub-path }}
        KUBERNETES_JOB_BACKOFF_LIMIT: ${{ inputs.kubernetes-job-backoff-limit }}
        KUBERNETES_JOB_COMPLETIONS: ${{ inputs.kubernetes-job-completions }}
        KUBERNETES_JOB_PARALLELISM: ${{ inputs.kubernetes-job-parallelism }}
        KUBERNETES_JOB_ACTIVE_DEADLINE_SECONDS: ${{ inputs.kubernetes-job-active-deadline-seconds }}
        KUBERNETES_JOB_TTL_SECONDS_AFTER_FINISHED: ${{ inputs.kubernetes-job-ttl-seconds-after-finished }}
        KUBERNETES_JOB_RESTART_POLICY: ${{ inputs.kubernetes-job-restart-policy }}
        KUBERNETES_JOB_ENV_SUB_PATH: ${{ inputs.kubernetes-job-env-sub-path }}
        KUBERNETES_JOB_ADDITIONAL_LABELS: ${{ inputs.kubernetes-job-additional-labels }}
        KUBERNETES_JOB_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-job-additional-annotations }}
        KUBERNETES_JOB_LIVENESS_PROBE_ENABLED: ${{ inputs.kubernetes-job-liveness-probe-enabled }}
        KUBERNETES_JOB_READINESS_PROBE_ENABLED: ${{ inputs.kubernetes-job-readiness-probe-enabled }}
        KUBERNETES_JOB_STARTUP_PROBE_ENABLED: ${{ inputs.kubernetes-job-startup-probe-enabled }}
        KUBERNETES_JOB_PORTS_ENABLED: ${{ inputs.kubernetes-job-ports-enabled }}
        # Workflow inputs - cronjob unique
        KUBERNETES_CRONJOB_NAME_SUFFIX: ${{ inputs.kubernetes-cronjob-name-suffix }}
        KUBERNETES_CRONJOB_COMBINED_SUB_PATH: ${{ inputs.kubernetes-cronjob-combined-sub-path }}
        KUBERNETES_CRONJOB_CONCURRENCY_POLICY: ${{ inputs.kubernetes-cronjob-concurrency-policy }}
        KUBERNETES_CRONJOB_STARTING_DEADLINE_SECONDS: ${{ inputs.kubernetes-cronjob-starting-deadline-seconds }}
        KUBERNETES_CRONJOB_SUCCESSFUL_JOBS_HISTORY_LIMIT: ${{ inputs.kubernetes-cronjob-successful-jobs-history-limit }}
        KUBERNETES_CRONJOB_FAILED_JOBS_HISTORY_LIMIT: ${{ inputs.kubernetes-cronjob-failed-jobs-history-limit }}
        KUBERNETES_CRONJOB_BACKOFF_LIMIT: ${{ inputs.kubernetes-cronjob-backoff-limit }}
        KUBERNETES_CRONJOB_COMPLETIONS: ${{ inputs.kubernetes-cronjob-completions }}
        KUBERNETES_CRONJOB_PARALLELISM: ${{ inputs.kubernetes-cronjob-parallelism }}
        KUBERNETES_CRONJOB_ACTIVE_DEADLINE_SECONDS: ${{ inputs.kubernetes-cronjob-active-deadline-seconds }}
        KUBERNETES_CRONJOB_RESTART_POLICY: ${{ inputs.kubernetes-cronjob-restart-policy }}
        KUBERNETES_CRONJOB_ENV_SUB_PATH: ${{ inputs.kubernetes-cronjob-env-sub-path }}
        KUBERNETES_CRONJOB_ADDITIONAL_LABELS: ${{ inputs.kubernetes-cronjob-additional-labels }}
        KUBERNETES_CRONJOB_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-cronjob-additional-annotations }}
        KUBERNETES_CRONJOB_LIVENESS_PROBE_ENABLED: ${{ inputs.kubernetes-cronjob-liveness-probe-enabled }}
        KUBERNETES_CRONJOB_READINESS_PROBE_ENABLED: ${{ inputs.kubernetes-cronjob-readiness-probe-enabled }}
        KUBERNETES_CRONJOB_STARTUP_PROBE_ENABLED: ${{ inputs.kubernetes-cronjob-startup-probe-enabled }}
        KUBERNETES_CRONJOB_PORTS_ENABLED: ${{ inputs.kubernetes-cronjob-ports-enabled }}
        KUBERNETES_CRONJOB_TTL_SECONDS_AFTER_FINISHED: ${{ inputs.kubernetes-cronjob-ttl-seconds-after-finished }}
        # Workflow inputs - kubernetes service generation
        KUBERNETES_SERVICE_GENERATION_ENABLED: ${{ inputs.kubernetes-service-generation-enabled }}
        KUBERNETES_SERVICE_TYPE: ${{ inputs.kubernetes-service-type }}
        KUBERNETES_SERVICE_PORT: ${{ inputs.kubernetes-service-port }}
        KUBERNETES_SERVICE_TARGET_PORT: ${{ inputs.kubernetes-service-target-port }}
        KUBERNETES_SERVICE_PROTOCOL: ${{ inputs.kubernetes-service-protocol }}
        KUBERNETES_SERVICE_PORT_NAME: ${{ inputs.kubernetes-service-port-name }}
        KUBERNETES_SERVICE_NODE_PORT: ${{ inputs.kubernetes-service-node-port }}
        KUBERNETES_SERVICE_EXTERNAL_NAME: ${{ inputs.kubernetes-service-external-name }}
        KUBERNETES_SERVICE_EXTERNAL_TRAFFIC_POLICY: ${{ inputs.kubernetes-service-external-traffic-policy }}
        KUBERNETES_SERVICE_NAME_SUFFIX: ${{ inputs.kubernetes-service-name-suffix }}
        KUBERNETES_SERVICE_COMBINED_SUB_PATH: ${{ inputs.kubernetes-service-combined-sub-path }}
        KUBERNETES_SERVICE_ADDITIONAL_LABELS: ${{ inputs.kubernetes-service-additional-labels }}
        KUBERNETES_SERVICE_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-service-additional-annotations }}
        # Workflow inputs - kubernetes poddisruptionbudget generation
        KUBERNETES_PODDISRUPTIONBUDGET_GENERATION_ENABLED: ${{ inputs.kubernetes-poddisruptionbudget-generation-enabled }}
        KUBERNETES_PODDISRUPTIONBUDGET_NAME_SUFFIX: ${{ inputs.kubernetes-poddisruptionbudget-name-suffix }}
        KUBERNETES_PODDISRUPTIONBUDGET_COMBINED_SUB_PATH: ${{ inputs.kubernetes-poddisruptionbudget-combined-sub-path }}
        KUBERNETES_PODDISRUPTIONBUDGET_STRATEGY: ${{ inputs.kubernetes-poddisruptionbudget-strategy }}
        KUBERNETES_PODDISRUPTIONBUDGET_VALUE: ${{ inputs.kubernetes-poddisruptionbudget-value }}
        KUBERNETES_PODDISRUPTIONBUDGET_ADDITIONAL_LABELS: ${{ inputs.kubernetes-poddisruptionbudget-additional-labels }}
        KUBERNETES_PODDISRUPTIONBUDGET_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-poddisruptionbudget-additional-annotations }}

        # Workflow inputs - token substitution
        TOKEN_DELIMITER_STYLE: ${{ inputs.token-delimiter-style }}
        TOKEN_NAME_STYLE: ${{ inputs.token-name-style }}
        TOKEN_NAME_VALIDATION: ${{ inputs.token-name-validation }}
        ALLOW_BUILTIN_TOKEN_OVERRIDE: ${{ inputs.allow-builtin-token-override }}
        CONFIG_SUB_PATH: ${{ inputs.config-sub-path }}
        CONFIG_VALUE_TRAILING_NEWLINE: ${{ inputs.config-value-trailing-newline }}

        # Workflow inputs - naming, versions, and tags calculation
        DEFAULT_BRANCH: ${{ inputs.default-branch }}
        CURRENT_BRANCH: ${{ inputs.current-branch }}
        RELEASE_BRANCH: ${{ inputs.release-branch }}
        ADDITIONAL_RELEASE_BRANCHES: ${{ inputs.additional-release-branches }}
        TAG_VERSION_MAX_PARTS: ${{ inputs.tag-version-max-parts }}
        TAG_VERSION_CALCULATION_STRATEGY: ${{ inputs.tag-version-calculation-strategy }}
        TAG_VERSION_PATTERN_TYPE: ${{ inputs.tag-version-pattern-type }}
        TAG_VERSION_PREFIX_PARTS: ${{ inputs.tag-version-prefix-parts }}
        TAG_VERSION_SOURCE_SUB_PATH: ${{ inputs.tag-version-source-sub-path }}
        TAG_VERSION_SOURCE_FILE_NAME: ${{ inputs.tag-version-source-file-name }}
        TAG_VERSION_SOURCE_CUSTOM_PATTERN: ${{ inputs.tag-version-source-custom-pattern }}
        TAG_VERSION_SOURCE_TWO_SUB_PATH: ${{ inputs.tag-version-source-two-sub-path }}
        TAG_VERSION_SOURCE_TWO_FILE_NAME: ${{ inputs.tag-version-source-two-file-name }}
        TAG_VERSION_SOURCE_TWO_PATTERN: ${{ inputs.tag-version-source-two-pattern }}
        TAG_VERSION_SOURCE_TWO_PREFIX_PARTS: ${{ inputs.tag-version-source-two-prefix-parts }}
        TAG_VERSION_USE_SOURCE_VERSION_EXACT: ${{ inputs.tag-version-use-source-version-exact }}

        # Workflow inputs - quality check options
        BLOCK_SLASHES: ${{ inputs.block-slashes }}
        QC_BLOCK_SLASH_CONTAINING_BRANCHES: ${{ inputs.qc-block-slash-containing-branches }}
        QC_BLOCK_DOUBLE_HYPHEN_CONTAINING_BRANCHES: ${{ inputs.qc-block-double-hyphen-containing-branches }}
        QC_REQUIRE_CONVENTIONAL_BRANCHES: ${{ inputs.qc-require-conventional-branches }}
        QC_REQUIRE_CONVENTIONAL_COMMITS: ${{ inputs.qc-require-conventional-commits }}
        QC_BLOCK_CONVENTIONAL_COMMITS: ${{ inputs.qc-block-conventional-commits }}
        QC_BLOCK_DUPLICATE_COMMIT_MESSAGES: ${{ inputs.qc-block-duplicate-commit-messages }}

        # Workflow inputs - hook script paths
        HOOK_PRE_TAGGING_TESTS_SCRIPT_SUB_PATH: ${{ inputs.hook-pre-tagging-tests-script-sub-path }}
        HOOK_PRE_DOCKER_PREPARE_SCRIPT_SUB_PATH: ${{ inputs.hook-pre-docker-prepare-script-sub-path }}
        HOOK_POST_DOCKER_TESTS_SCRIPT_SUB_PATH: ${{ inputs.hook-post-docker-tests-script-sub-path }}
        HOOK_PRE_PACKAGE_PREPARE_SCRIPT_SUB_PATH: ${{ inputs.hook-pre-package-prepare-script-sub-path }}
        HOOK_POST_PACKAGE_TESTS_SCRIPT_SUB_PATH: ${{ inputs.hook-post-package-tests-script-sub-path }}

        # Workflow inputs - github release
        GITHUB_RELEASE_ENABLED: ${{ inputs.github-release-enabled }}
        GITHUB_RELEASE_SUBSTITUTED_FILES: ${{ inputs.github-release-substituted-files }}
        GITHUB_RELEASE_VERBATIM_FILES: ${{ inputs.github-release-verbatim-files }}
        GITHUB_RELEASE_NOTES: ${{ inputs.github-release-notes }}
        GITHUB_RELEASE_NOTES_FILE: ${{ inputs.github-release-notes-file }}
        GITHUB_RELEASE_ADD_VERSION_TO_FILENAMES: ${{ inputs.github-release-add-version-to-filenames }}

        # Step outputs - version outputs
        VERSION: ${{ inputs.version }}
        VERSION_MAJOR: ${{ inputs.version-major }}
        VERSION_MINOR: ${{ inputs.version-minor }}
        VERSION_PATCH: ${{ inputs.version-patch }}
        VERSION_2_PART: ${{ inputs.version-2-part }}
        VERSION_3_PART: ${{ inputs.version-3-part }}
        VERSION_4_PART: ${{ inputs.version-4-part }}
        DOCKER_TAG: ${{ inputs.docker-tag }}
        DOCKER_IMAGE_NAME: ${{ inputs.docker-image-name }}
        GIT_TAG: ${{ inputs.git-tag }}
        PROJECT_NAME: ${{ inputs.project-name }}
        IS_RELEASE: ${{ inputs.is-release }}
        # Step outputs - docker outputs
        DOCKER_SUBSTITUTED_SUB_PATH: ${{ inputs.docker-substituted-sub-path }}
        TARGET_IMAGE_FULL_URI: ${{ inputs.target-image-full-uri }}
        # Step outputs - manifest outputs
        MANIFESTS_SUBSTITUTED_SUB_PATH: ${{ inputs.manifests-substituted-sub-path }}
      run: .github/buildon-github-actions/src/scripts/main/hook-pre-package-prepare
