# SPDX-License-Identifier: MIT
# Copyright (c) 2025-2026 Kaptain contributors (Fred Cooke)

name: 'Generate Kubernetes Workload'
description: 'Routes to appropriate workload generator (Deployment, StatefulSet, etc.)'

inputs:
  # Required context
  project-name:
    description: 'Project name for workload naming and labels'
    required: true

  # Global settings
  output-sub-path:
    description: 'Build output directory (relative)'
    required: false
    default: 'target'
  kubernetes-global-additional-labels:
    description: 'Additional labels for all Kubernetes manifests (comma-separated key=value)'
    required: false
    default: ''
  kubernetes-global-additional-annotations:
    description: 'Additional annotations for all Kubernetes manifests (comma-separated key=value)'
    required: false
    default: ''

  # Workload settings
  kubernetes-workload-type:
    description: 'Workload type to generate (deployment, statefulset, none)'
    required: false
    default: 'deployment'
  kubernetes-workload-replicas:
    description: 'Replica count (empty for token, NO for HPA management)'
    required: false
    default: ''
  kubernetes-workload-revision-history-limit:
    description: 'Number of revisions to retain (ReplicaSets for Deployment, ControllerRevisions for StatefulSet)'
    required: false
    default: '10'
  kubernetes-workload-name-suffix:
    description: 'Optional suffix for workload name and filename'
    required: false
    default: ''
  kubernetes-workload-combined-sub-path:
    description: 'Sub-path within combined/ for output'
    required: false
    default: ''
  kubernetes-workload-env-sub-path:
    description: 'Directory containing environment variable files (default per workload type)'
    required: false
    default: ''
  kubernetes-workload-additional-labels:
    description: 'Additional labels specific to workload (comma-separated key=value)'
    required: false
    default: ''
  kubernetes-workload-additional-annotations:
    description: 'Additional annotations specific to workload (comma-separated key=value)'
    required: false
    default: ''
  kubernetes-workload-container-port:
    description: 'Container port (default: 1024)'
    required: false
    default: '1024'
  kubernetes-workload-image-reference-style:
    description: 'Image reference style (combined, separate, project-name-prefixed-combined, project-name-prefixed-separate)'
    required: false
    default: 'combined'
  kubernetes-workload-readonly-root-filesystem:
    description: 'Enable read-only root filesystem (true/false)'
    required: false
    default: 'true'
  kubernetes-workload-seccomp-profile:
    description: 'Seccomp profile (DISABLED, RuntimeDefault, Localhost, Unconfined)'
    required: false
    default: 'DISABLED'
  kubernetes-workload-automount-service-account-token:
    description: 'Automount service account token (true/false)'
    required: false
    default: 'false'
  kubernetes-workload-image-pull-secrets:
    description: 'Include imagePullSecrets in pod spec (ENABLED/DISABLED)'
    required: false
    default: 'ENABLED'
  kubernetes-workload-resources-memory:
    description: 'Memory limit (e.g., 128Mi, 1Gi)'
    required: false
    default: '10Mi'
  kubernetes-workload-resources-cpu-request:
    description: 'CPU request (e.g., 100m, 1)'
    required: false
    default: '100m'
  kubernetes-workload-resources-cpu-limit:
    description: 'CPU limit (empty for no limit)'
    required: false
    default: ''
  kubernetes-workload-resources-ephemeral-storage:
    description: 'Ephemeral storage request/limit for disk usage (e.g., 10Mi, 100Mi, 1Gi)'
    required: false
    default: '10Mi'
  kubernetes-workload-configmap-mount-path:
    description: 'ConfigMap mount path in container'
    required: false
    default: '/configmap'
  kubernetes-workload-secret-mount-path:
    description: 'Secret mount path in container'
    required: false
    default: '/secret'
  kubernetes-workload-configmap-keys-for-env:
    description: 'Comma/space-separated ConfigMap keys to expose as env vars'
    required: false
    default: ''
  kubernetes-workload-secret-keys-for-env:
    description: 'Comma/space-separated Secret keys to expose as env vars'
    required: false
    default: ''
  kubernetes-workload-termination-grace-period-seconds:
    description: 'Termination grace period in seconds'
    required: false
    default: '10'
  kubernetes-workload-prestop-command:
    description: 'PreStop hook command (empty for none)'
    required: false
    default: ''
  kubernetes-workload-affinity-strategy:
    description: 'Pod affinity strategy plugin name'
    required: false
    default: 'spread-nodes-and-zones-ha'

  # Liveness probe
  kubernetes-workload-probe-liveness-check-type:
    description: 'Liveness probe type (http-get, tcp-socket, exec, grpc, none)'
    required: false
    default: 'http-get'
  kubernetes-workload-probe-liveness-http-path:
    description: 'Liveness probe HTTP path'
    required: false
    default: '/liveness'
  kubernetes-workload-probe-liveness-http-scheme:
    description: 'Liveness probe HTTP scheme (HTTP, HTTPS)'
    required: false
    default: 'HTTP'
  kubernetes-workload-probe-liveness-tcp-port:
    description: 'Liveness probe TCP port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-liveness-exec-command:
    description: 'Liveness probe exec command'
    required: false
    default: ''
  kubernetes-workload-probe-liveness-grpc-port:
    description: 'Liveness probe gRPC port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-liveness-grpc-service:
    description: 'Liveness probe gRPC service name'
    required: false
    default: ''
  kubernetes-workload-probe-liveness-initial-delay-seconds:
    description: 'Liveness probe initial delay in seconds'
    required: false
    default: '10'
  kubernetes-workload-probe-liveness-period-seconds:
    description: 'Liveness probe period in seconds'
    required: false
    default: '10'
  kubernetes-workload-probe-liveness-timeout-seconds:
    description: 'Liveness probe timeout in seconds'
    required: false
    default: '5'
  kubernetes-workload-probe-liveness-failure-threshold:
    description: 'Liveness probe failure threshold'
    required: false
    default: '3'
  kubernetes-workload-probe-liveness-termination-grace-period-seconds:
    description: 'Liveness probe termination grace period (empty for default)'
    required: false
    default: ''

  # Readiness probe
  kubernetes-workload-probe-readiness-check-type:
    description: 'Readiness probe type (http-get, tcp-socket, exec, grpc, none)'
    required: false
    default: 'http-get'
  kubernetes-workload-probe-readiness-http-path:
    description: 'Readiness probe HTTP path'
    required: false
    default: '/readiness'
  kubernetes-workload-probe-readiness-http-scheme:
    description: 'Readiness probe HTTP scheme (HTTP, HTTPS)'
    required: false
    default: 'HTTP'
  kubernetes-workload-probe-readiness-tcp-port:
    description: 'Readiness probe TCP port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-readiness-exec-command:
    description: 'Readiness probe exec command'
    required: false
    default: ''
  kubernetes-workload-probe-readiness-grpc-port:
    description: 'Readiness probe gRPC port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-readiness-grpc-service:
    description: 'Readiness probe gRPC service name'
    required: false
    default: ''
  kubernetes-workload-probe-readiness-initial-delay-seconds:
    description: 'Readiness probe initial delay in seconds'
    required: false
    default: '5'
  kubernetes-workload-probe-readiness-period-seconds:
    description: 'Readiness probe period in seconds'
    required: false
    default: '5'
  kubernetes-workload-probe-readiness-timeout-seconds:
    description: 'Readiness probe timeout in seconds'
    required: false
    default: '3'
  kubernetes-workload-probe-readiness-failure-threshold:
    description: 'Readiness probe failure threshold'
    required: false
    default: '3'
  kubernetes-workload-probe-readiness-success-threshold:
    description: 'Readiness probe success threshold'
    required: false
    default: '1'

  # Startup probe
  kubernetes-workload-probe-startup-check-type:
    description: 'Startup probe type (http-get, tcp-socket, exec, grpc, none)'
    required: false
    default: 'http-get'
  kubernetes-workload-probe-startup-http-path:
    description: 'Startup probe HTTP path'
    required: false
    default: '/startup'
  kubernetes-workload-probe-startup-http-scheme:
    description: 'Startup probe HTTP scheme (HTTP, HTTPS)'
    required: false
    default: 'HTTP'
  kubernetes-workload-probe-startup-tcp-port:
    description: 'Startup probe TCP port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-startup-exec-command:
    description: 'Startup probe exec command'
    required: false
    default: ''
  kubernetes-workload-probe-startup-grpc-port:
    description: 'Startup probe gRPC port (defaults to container port)'
    required: false
    default: ''
  kubernetes-workload-probe-startup-grpc-service:
    description: 'Startup probe gRPC service name'
    required: false
    default: ''
  kubernetes-workload-probe-startup-initial-delay-seconds:
    description: 'Startup probe initial delay in seconds'
    required: false
    default: '0'
  kubernetes-workload-probe-startup-period-seconds:
    description: 'Startup probe period in seconds'
    required: false
    default: '5'
  kubernetes-workload-probe-startup-timeout-seconds:
    description: 'Startup probe timeout in seconds'
    required: false
    default: '3'
  kubernetes-workload-probe-startup-failure-threshold:
    description: 'Startup probe failure threshold'
    required: false
    default: '30'
  kubernetes-workload-probe-startup-termination-grace-period-seconds:
    description: 'Startup probe termination grace period (empty for default)'
    required: false
    default: ''

  # Deployment unique settings
  kubernetes-deployment-env-sub-path:
    description: 'Path to deployment environment variables directory'
    required: false
    default: 'src/deployment-env'
  kubernetes-deployment-additional-labels:
    description: 'Additional labels for Deployment resources (key=value,key=value)'
    required: false
    default: ''
  kubernetes-deployment-additional-annotations:
    description: 'Additional annotations for Deployment resources (key=value,key=value)'
    required: false
    default: ''

  # StatefulSet unique settings
  kubernetes-statefulset-env-sub-path:
    description: 'Path to statefulset environment variables directory'
    required: false
    default: 'src/statefulset-env'
  kubernetes-statefulset-additional-labels:
    description: 'Additional labels for StatefulSet resources (key=value,key=value)'
    required: false
    default: ''
  kubernetes-statefulset-additional-annotations:
    description: 'Additional annotations for StatefulSet resources (key=value,key=value)'
    required: false
    default: ''
  kubernetes-statefulset-service-name:
    description: 'Headless service name (empty for auto-derived from project name)'
    required: false
    default: ''
  kubernetes-statefulset-pod-management-policy:
    description: 'Pod management policy (OrderedReady or Parallel)'
    required: false
    default: 'OrderedReady'
  kubernetes-statefulset-update-strategy-type:
    description: 'Update strategy type (RollingUpdate or OnDelete)'
    required: false
    default: 'RollingUpdate'
  kubernetes-statefulset-update-strategy-partition:
    description: 'Partition for rolling updates (empty for none)'
    required: false
    default: ''
  kubernetes-statefulset-pvc-enabled:
    description: 'Enable persistent volume claim template (true/false)'
    required: false
    default: 'true'
  kubernetes-statefulset-pvc-storage-class:
    description: 'Storage class for PVC (empty for cluster default)'
    required: false
    default: ''
  kubernetes-statefulset-pvc-storage-size:
    description: 'Storage size for PVC (e.g., 1Gi, 10Gi)'
    required: false
    default: '1Gi'
  kubernetes-statefulset-pvc-access-mode:
    description: 'PVC access mode (ReadWriteOnce, ReadOnlyMany, ReadWriteMany)'
    required: false
    default: 'ReadWriteOnce'
  kubernetes-statefulset-pvc-volume-name:
    description: 'Volume name for the PVC template'
    required: false
    default: 'data'
  kubernetes-statefulset-pvc-mount-path:
    description: 'Mount path for the persistent volume'
    required: false
    default: '/data'

  # Token substitution
  token-name-style:
    description: 'Case style for token names (UPPER_SNAKE, lower_snake, lower-kebab, UPPER-KEBAB, camelCase, PascalCase, lower.dot, UPPER.DOT)'
    required: false
    default: 'PascalCase'
  token-delimiter-style:
    description: 'Token delimiter syntax for variables (shell, mustache, helm, erb, github-actions, blade, stringtemplate, ognl, t4, swift)'
    required: false
    default: 'shell'

runs:
  using: 'composite'
  steps:
    - name: Generate workload manifest
      id: generate
      shell: bash
      env:
        LOG_ERROR_PREFIX: '::error::'
        # Required context
        PROJECT_NAME: ${{ inputs.project-name }}
        # Global settings
        OUTPUT_SUB_PATH: ${{ inputs.output-sub-path }}
        KUBERNETES_GLOBAL_ADDITIONAL_LABELS: ${{ inputs.kubernetes-global-additional-labels }}
        KUBERNETES_GLOBAL_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-global-additional-annotations }}
        # Workload settings
        KUBERNETES_WORKLOAD_TYPE: ${{ inputs.kubernetes-workload-type }}
        KUBERNETES_WORKLOAD_REPLICAS: ${{ inputs.kubernetes-workload-replicas }}
        KUBERNETES_WORKLOAD_REVISION_HISTORY_LIMIT: ${{ inputs.kubernetes-workload-revision-history-limit }}
        KUBERNETES_WORKLOAD_NAME_SUFFIX: ${{ inputs.kubernetes-workload-name-suffix }}
        KUBERNETES_WORKLOAD_COMBINED_SUB_PATH: ${{ inputs.kubernetes-workload-combined-sub-path }}
        KUBERNETES_WORKLOAD_ENV_SUB_PATH: ${{ inputs.kubernetes-workload-env-sub-path }}
        KUBERNETES_WORKLOAD_ADDITIONAL_LABELS: ${{ inputs.kubernetes-workload-additional-labels }}
        KUBERNETES_WORKLOAD_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-workload-additional-annotations }}
        KUBERNETES_WORKLOAD_CONTAINER_PORT: ${{ inputs.kubernetes-workload-container-port }}
        KUBERNETES_WORKLOAD_IMAGE_REFERENCE_STYLE: ${{ inputs.kubernetes-workload-image-reference-style }}
        KUBERNETES_WORKLOAD_READONLY_ROOT_FILESYSTEM: ${{ inputs.kubernetes-workload-readonly-root-filesystem }}
        KUBERNETES_WORKLOAD_SECCOMP_PROFILE: ${{ inputs.kubernetes-workload-seccomp-profile }}
        KUBERNETES_WORKLOAD_AUTOMOUNT_SERVICE_ACCOUNT_TOKEN: ${{ inputs.kubernetes-workload-automount-service-account-token }}
        KUBERNETES_WORKLOAD_IMAGE_PULL_SECRETS: ${{ inputs.kubernetes-workload-image-pull-secrets }}
        KUBERNETES_WORKLOAD_RESOURCES_MEMORY: ${{ inputs.kubernetes-workload-resources-memory }}
        KUBERNETES_WORKLOAD_RESOURCES_CPU_REQUEST: ${{ inputs.kubernetes-workload-resources-cpu-request }}
        KUBERNETES_WORKLOAD_RESOURCES_CPU_LIMIT: ${{ inputs.kubernetes-workload-resources-cpu-limit }}
        KUBERNETES_WORKLOAD_RESOURCES_EPHEMERAL_STORAGE: ${{ inputs.kubernetes-workload-resources-ephemeral-storage }}
        KUBERNETES_WORKLOAD_CONFIGMAP_MOUNT_PATH: ${{ inputs.kubernetes-workload-configmap-mount-path }}
        KUBERNETES_WORKLOAD_SECRET_MOUNT_PATH: ${{ inputs.kubernetes-workload-secret-mount-path }}
        KUBERNETES_WORKLOAD_CONFIGMAP_KEYS_FOR_ENV: ${{ inputs.kubernetes-workload-configmap-keys-for-env }}
        KUBERNETES_WORKLOAD_SECRET_KEYS_FOR_ENV: ${{ inputs.kubernetes-workload-secret-keys-for-env }}
        KUBERNETES_WORKLOAD_TERMINATION_GRACE_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-termination-grace-period-seconds }}
        KUBERNETES_WORKLOAD_PRESTOP_COMMAND: ${{ inputs.kubernetes-workload-prestop-command }}
        KUBERNETES_WORKLOAD_AFFINITY_STRATEGY: ${{ inputs.kubernetes-workload-affinity-strategy }}
        # Liveness probe
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-liveness-check-type }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-liveness-http-path }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_HTTP_SCHEME: ${{ inputs.kubernetes-workload-probe-liveness-http-scheme }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_TCP_PORT: ${{ inputs.kubernetes-workload-probe-liveness-tcp-port }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_EXEC_COMMAND: ${{ inputs.kubernetes-workload-probe-liveness-exec-command }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_GRPC_PORT: ${{ inputs.kubernetes-workload-probe-liveness-grpc-port }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_GRPC_SERVICE: ${{ inputs.kubernetes-workload-probe-liveness-grpc-service }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_INITIAL_DELAY_SECONDS: ${{ inputs.kubernetes-workload-probe-liveness-initial-delay-seconds }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-probe-liveness-period-seconds }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_TIMEOUT_SECONDS: ${{ inputs.kubernetes-workload-probe-liveness-timeout-seconds }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_FAILURE_THRESHOLD: ${{ inputs.kubernetes-workload-probe-liveness-failure-threshold }}
        KUBERNETES_WORKLOAD_PROBE_LIVENESS_TERMINATION_GRACE_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-probe-liveness-termination-grace-period-seconds }}
        # Readiness probe
        KUBERNETES_WORKLOAD_PROBE_READINESS_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-readiness-check-type }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-readiness-http-path }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_HTTP_SCHEME: ${{ inputs.kubernetes-workload-probe-readiness-http-scheme }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_TCP_PORT: ${{ inputs.kubernetes-workload-probe-readiness-tcp-port }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_EXEC_COMMAND: ${{ inputs.kubernetes-workload-probe-readiness-exec-command }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_GRPC_PORT: ${{ inputs.kubernetes-workload-probe-readiness-grpc-port }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_GRPC_SERVICE: ${{ inputs.kubernetes-workload-probe-readiness-grpc-service }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_INITIAL_DELAY_SECONDS: ${{ inputs.kubernetes-workload-probe-readiness-initial-delay-seconds }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-probe-readiness-period-seconds }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_TIMEOUT_SECONDS: ${{ inputs.kubernetes-workload-probe-readiness-timeout-seconds }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_FAILURE_THRESHOLD: ${{ inputs.kubernetes-workload-probe-readiness-failure-threshold }}
        KUBERNETES_WORKLOAD_PROBE_READINESS_SUCCESS_THRESHOLD: ${{ inputs.kubernetes-workload-probe-readiness-success-threshold }}
        # Startup probe
        KUBERNETES_WORKLOAD_PROBE_STARTUP_CHECK_TYPE: ${{ inputs.kubernetes-workload-probe-startup-check-type }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_HTTP_PATH: ${{ inputs.kubernetes-workload-probe-startup-http-path }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_HTTP_SCHEME: ${{ inputs.kubernetes-workload-probe-startup-http-scheme }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_TCP_PORT: ${{ inputs.kubernetes-workload-probe-startup-tcp-port }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_EXEC_COMMAND: ${{ inputs.kubernetes-workload-probe-startup-exec-command }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_GRPC_PORT: ${{ inputs.kubernetes-workload-probe-startup-grpc-port }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_GRPC_SERVICE: ${{ inputs.kubernetes-workload-probe-startup-grpc-service }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_INITIAL_DELAY_SECONDS: ${{ inputs.kubernetes-workload-probe-startup-initial-delay-seconds }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-probe-startup-period-seconds }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_TIMEOUT_SECONDS: ${{ inputs.kubernetes-workload-probe-startup-timeout-seconds }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_FAILURE_THRESHOLD: ${{ inputs.kubernetes-workload-probe-startup-failure-threshold }}
        KUBERNETES_WORKLOAD_PROBE_STARTUP_TERMINATION_GRACE_PERIOD_SECONDS: ${{ inputs.kubernetes-workload-probe-startup-termination-grace-period-seconds }}
        # Deployment unique settings
        KUBERNETES_DEPLOYMENT_ENV_SUB_PATH: ${{ inputs.kubernetes-deployment-env-sub-path }}
        KUBERNETES_DEPLOYMENT_ADDITIONAL_LABELS: ${{ inputs.kubernetes-deployment-additional-labels }}
        KUBERNETES_DEPLOYMENT_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-deployment-additional-annotations }}
        # StatefulSet unique settings
        KUBERNETES_STATEFULSET_ENV_SUB_PATH: ${{ inputs.kubernetes-statefulset-env-sub-path }}
        KUBERNETES_STATEFULSET_ADDITIONAL_LABELS: ${{ inputs.kubernetes-statefulset-additional-labels }}
        KUBERNETES_STATEFULSET_ADDITIONAL_ANNOTATIONS: ${{ inputs.kubernetes-statefulset-additional-annotations }}
        KUBERNETES_STATEFULSET_SERVICE_NAME: ${{ inputs.kubernetes-statefulset-service-name }}
        KUBERNETES_STATEFULSET_POD_MANAGEMENT_POLICY: ${{ inputs.kubernetes-statefulset-pod-management-policy }}
        KUBERNETES_STATEFULSET_UPDATE_STRATEGY_TYPE: ${{ inputs.kubernetes-statefulset-update-strategy-type }}
        KUBERNETES_STATEFULSET_UPDATE_STRATEGY_PARTITION: ${{ inputs.kubernetes-statefulset-update-strategy-partition }}
        KUBERNETES_STATEFULSET_PVC_ENABLED: ${{ inputs.kubernetes-statefulset-pvc-enabled }}
        KUBERNETES_STATEFULSET_PVC_STORAGE_CLASS: ${{ inputs.kubernetes-statefulset-pvc-storage-class }}
        KUBERNETES_STATEFULSET_PVC_STORAGE_SIZE: ${{ inputs.kubernetes-statefulset-pvc-storage-size }}
        KUBERNETES_STATEFULSET_PVC_ACCESS_MODE: ${{ inputs.kubernetes-statefulset-pvc-access-mode }}
        KUBERNETES_STATEFULSET_PVC_VOLUME_NAME: ${{ inputs.kubernetes-statefulset-pvc-volume-name }}
        KUBERNETES_STATEFULSET_PVC_MOUNT_PATH: ${{ inputs.kubernetes-statefulset-pvc-mount-path }}
        # Token substitution
        TOKEN_NAME_STYLE: ${{ inputs.token-name-style }}
        TOKEN_DELIMITER_STYLE: ${{ inputs.token-delimiter-style }}
      run: "${{ github.action_path }}/../../scripts/generators/generate-kubernetes-workload"
